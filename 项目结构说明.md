# 项目结构说明

```
cursor-github-plugin/
├── src/                          # 源代码目录
│   ├── extension.ts              # 插件主入口文件
│   ├── types/                    # TypeScript 类型定义
│   │   └── index.ts              # GitHub、项目、代码修改等类型
│   ├── services/                 # 核心服务
│   │   ├── githubService.ts      # GitHub API 服务（搜索、获取仓库信息）
│   │   ├── projectManager.ts     # 项目管理服务（下载、保存、打开）
│   │   └── aiCodeModifier.ts     # AI 代码修改服务（基于 DeepSeek API）
│   └── ui/                       # 用户界面组件
│       └── searchPanel.ts        # 搜索面板 Webview
├── out/                          # 编译输出目录（编译后生成）
├── .vscode/                      # VS Code/Cursor 配置
│   ├── launch.json               # 调试配置
│   └── tasks.json                # 构建任务配置
├── package.json                  # 项目配置和依赖
├── tsconfig.json                 # TypeScript 配置
├── .eslintrc.json                # ESLint 配置
├── .vscodeignore                 # 打包时忽略的文件
├── .gitignore                    # Git 忽略文件
├── README.md                     # 项目说明
├── README-使用指南.md            # 详细使用指南
├── INSTALL.md                    # 安装说明
├── QUICKSTART.md                 # 快速开始指南
└── CHANGELOG.md                  # 更新日志

```

## 核心文件说明

### 1. extension.ts
插件的主入口文件，负责：
- 注册命令（搜索、修改代码、打开项目等）
- 初始化服务
- 处理用户交互

### 2. services/githubService.ts
GitHub API 封装，提供：
- `searchRepositories()` - 搜索仓库
- `getRepositoryDetails()` - 获取仓库详情
- `getRepositoryReadme()` - 获取 README
- `parseNaturalLanguageQuery()` - 自然语言查询解析

### 3. services/projectManager.ts
项目管理功能，提供：
- `downloadProject()` - 下载/克隆项目
- `getAllProjects()` - 获取所有已下载项目
- `openProject()` - 在 Cursor 中打开项目
- `deleteProject()` - 删除项目

### 4. services/aiCodeModifier.ts
AI 代码修改功能，提供：
- `modifyCode()` - 使用 AI 修改代码
- `explainCode()` - 解释代码
- `cleanCode()` - 清理 AI 返回的代码

### 5. ui/searchPanel.ts
搜索面板 UI，提供：
- Webview 界面
- 搜索结果展示
- 项目选择交互

### 6. types/index.ts
所有 TypeScript 类型定义：
- `GitHubRepository` - GitHub 仓库信息
- `DownloadedProject` - 已下载项目信息
- `CodeModificationRequest` - 代码修改请求
- `CodeModificationResponse` - 代码修改响应
- `QueryIntent` - 查询意图

## 数据流

### 搜索流程
```
用户输入自然语言
  → extension.ts (命令处理)
  → githubService.searchRepositories()
  → GitHub API
  → 解析结果
  → SearchPanel 显示
  → 用户选择
  → projectManager.downloadProject()
  → Git clone
  → 保存项目信息
```

### 代码修改流程
```
用户打开文件并输入需求
  → extension.ts (命令处理)
  → aiCodeModifier.modifyCode()
  → DeepSeek API
  → 返回修改后的代码
  → 用户确认
  → 应用到文件
```

## 扩展点

如果你想扩展功能，可以：

1. **添加新的搜索过滤器**
   - 修改 `githubService.ts` 中的 `parseNaturalLanguageQuery()`

2. **增强 AI 代码修改**
   - 修改 `aiCodeModifier.ts` 中的提示词
   - 添加更多上下文信息

3. **添加新的 UI 组件**
   - 在 `src/ui/` 中创建新的 Webview 面板
   - 在 `extension.ts` 中注册

4. **添加新的命令**
   - 在 `package.json` 的 `contributes.commands` 中添加
   - 在 `extension.ts` 中实现处理函数

